<%- include ('../partials/head')%>
<body class="min-h-screen flex flex-col bg-gradient-to-br from-red-50 via-white to-pink-50">
  <%- include ('../partials/nav')%>

  <div class="flex flex-1 items-center justify-center px-4 py-10">
    <main class="bg-white/90 backdrop-blur-md p-8 rounded-2xl shadow-xl w-full max-w-lg border border-red-100">
      <header class="mb-8 text-center">
        <h1 class="text-3xl font-bold text-red-700 tracking-tight">
          <%= editing ? "Edit" : "List" %> Venue Details
        </h1>
        <p class="text-gray-500 text-sm mt-1">
          Fill in the information below to <%= editing ? "update" : "add" %> your event property.
        </p>
      </header>
    
      <form action="/<%= editing ? 'edit-home' : 'add-home' %>" method="POST" enctype="multipart/form-data" class="space-y-5">
        <input type="hidden" name="id" value="<%= editing ? home._id : '' %>" />

        <input
          type="text"
          name="housename"
          value="<%= editing ? home.housename : '' %>"
          placeholder="Enter Venue Name (e.g. Royal Palace)"
          class="w-full px-4 py-3 border border-red-200 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 transition"
          required
        />

        <input
          type="text"
          name="address"
          value="<%= editing ? home.address : '' %>"
          placeholder="Enter full address"
          class="w-full px-4 py-3 border border-red-200 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 transition"
          required
        />

        <div class="relative">
          <select 
            name="venueType" 
            class="w-full px-4 py-3 border border-red-200 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 transition bg-white text-gray-700"
            required
          >
            <option value="" disabled <%= !editing ? 'selected' : '' %>>Select Venue Type</option>
            <option value="Banquet Hall" <%= editing && home.venueType === 'Banquet Hall' ? 'selected' : '' %>>Banquet Hall</option>
            <option value="Farmhouse" <%= editing && home.venueType === 'Farmhouse' ? 'selected' : '' %>>Farmhouse</option>
            <option value="Conference Hall" <%= editing && home.venueType === 'Conference Hall' ? 'selected' : '' %>>Conference Hall</option>
            <option value="Garden" <%= editing && home.venueType === 'Garden' ? 'selected' : '' %>>Garden / Lawn</option>
            <option value="General" <%= editing && home.venueType === 'General' ? 'selected' : '' %>>General Property</option>
          </select>
        </div>

        <input
          type="number"
          name="capacity"
          value="<%= editing ? home.capacity : '' %>"
          placeholder="Max Guest Capacity (e.g. 500)"
          class="w-full px-4 py-3 border border-red-200 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 transition"
          required
        />

        <input
          type="number"
          name="price"
          value="<%= editing ? home.price : '' %>"
          placeholder="Price per Day (â‚¹)"
          class="w-full px-4 py-3 border border-red-200 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 transition"
          required
        />

        <div class="relative flex flex-col items-center justify-center w-full p-6 border-2 border-dashed border-red-300 rounded-xl cursor-pointer hover:border-red-500 transition group bg-red-50">
          <input 
            type="file" 
            name="photoUrl" 
            accept="image/*" 
            multiple 
            id="fileUpload" 
            class="absolute inset-0 opacity-0 cursor-pointer"
            <%= editing ? '' : 'required' %> 
          />
          <svg class="w-12 h-12 text-red-400 group-hover:text-red-500 transition" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 16v-8m0 0L8 12m4-4l4 4M4 16.5V19a2 2 0 002 2h12a2 2 0 002-2v-2.5m-4-4L12 8l-4 4m0 0v-3.5a4.5 4.5 0 019 0V12" />
          </svg>
          <p class="mt-2 text-sm text-red-500 font-medium group-hover:text-red-600">Click to upload Venue Images</p>
          <ul id="fileList" class="mt-3 text-xs text-gray-600"></ul>
        </div>

        <input
          type="text"
          name="facilities"
          value="<%= editing ? home.facilities : '' %>"
          placeholder="Facilities (e.g. DJ, Parking, Catering)"
          class="w-full px-4 py-3 border border-red-200 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 transition"
          required
        />

        <input
          type="email"
          name="hostEmail"
          value="<%= editing ? home.hostEmail : '' %>" 
          placeholder="Confirm your registered Email"
          class="w-full px-4 py-3 border border-red-200 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 transition"
          required
        />

        <input
          type="number"
          name="rating"
          step="0.1"
          max="5"
          value="<%= editing ? home.rating : '' %>"
          placeholder="Initial Rating (0-5)"
          class="w-full px-4 py-3 border border-red-200 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 transition"
          required
        />

        <div class="relative flex flex-col items-center justify-center w-full p-6 border-2 border-dashed border-red-300 rounded-xl cursor-pointer hover:border-red-500 transition group bg-red-50 mt-5">
          <input 
            type="file" 
            name="houseRulesPdf" 
            accept="application/pdf" 
            id="pdfUpload" 
            class="absolute inset-0 opacity-0 cursor-pointer"
          />
          <svg class="w-12 h-12 text-red-400 group-hover:text-red-500 transition" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
          </svg>
          <p class="mt-2 text-sm text-red-500 font-medium group-hover:text-red-600">Upload Venue Rules (PDF)</p>
          <ul id="pdfFileList" class="mt-3 text-xs text-gray-600"></ul>
        </div>

        <button
          type="submit"
          class="w-full bg-red-600 text-white py-3 px-4 rounded-lg shadow-md hover:bg-red-700 hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 font-semibold"
        >
          <%= editing ? "Update Venue" : "List Venue" %>
        </button>
      </form>
    </main>
  </div>

  <script>
    // File Upload Display Logic
    document.getElementById('fileUpload').addEventListener('change', function(event) {
      const fileList = document.getElementById('fileList');
      fileList.innerHTML = ''; 
      Array.from(event.target.files).forEach(file => {
        const li = document.createElement('li');
        li.textContent = file.name;
        fileList.appendChild(li);
      });
    });

    // PDF Upload Display Logic
    document.getElementById('pdfUpload').addEventListener('change', function(event) {
      const pdfList = document.getElementById('pdfFileList');
      pdfList.innerHTML = '';
      Array.from(event.target.files).forEach(file => {
        const li = document.createElement('li');
        li.textContent = file.name;
        pdfList.appendChild(li);
      });
    });
  </script>
</body>