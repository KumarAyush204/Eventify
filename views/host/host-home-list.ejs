<%- include ('../partials/head') %>
<%- include ('../partials/nav') %>

<div class="bg-gradient-to-br from-red-50 via-white to-pink-50 min-h-screen py-10 px-4">
  <div class="max-w-7xl mx-auto flex flex-wrap gap-8 justify-center">
    <% homes.forEach(function(house) { %>
      <div class="bg-white shadow-lg rounded-2xl overflow-hidden w-72 hover:shadow-2xl transition-shadow duration-300 flex flex-col">
        
        <div class="relative group overflow-hidden">
          <img src="<%= house.photoUrl %>" alt="<%= house.housename %>" 
            class="w-full h-48 object-cover transform group-hover:scale-105 transition-transform duration-500"
          />
          <div class="absolute top-3 right-3 bg-white px-2 py-1 rounded-full shadow text-sm font-semibold flex items-center gap-1">
            <i class="fas fa-star text-yellow-400"></i>
            <%= house.rating %>
          </div>
          <div class="absolute bottom-3 left-3 bg-black/60 text-white px-2 py-1 rounded text-xs uppercase font-bold tracking-wide">
             <%= house.venueType %>
          </div>
        </div>

        <div class="p-5 flex flex-col flex-grow">
          <h3 class="text-lg font-bold text-red-700 mb-2 truncate"><%= house.housename %></h3>
          
          <p class="text-sm text-gray-600 mb-1 truncate">
            <span class="font-semibold"><i class="fas fa-map-marker-alt mr-1"></i></span> <%= house.address %>
          </p>

          <p class="text-sm text-gray-600 mb-1">
            <span class="font-semibold"><i class="fas fa-users mr-1"></i>Capacity:</span> <%= house.capacity %> Guests
          </p>

          <p class="text-sm text-gray-600 mb-3">
            <span class="font-semibold"><i class="fas fa-tag mr-1"></i>Price/Day:</span> â‚¹<%= house.price %>
          </p>

          <p class="text-xs text-gray-400 mb-4 italic truncate">
             Features: <%= house.facilities %>
          </p>
          
          <div class="mt-auto flex flex-col gap-2">
            
            <a href="/host/bookings/<%= house._id %>" 
               class="flex-1 text-center bg-green-500 text-white font-semibold py-2 rounded-lg shadow hover:bg-yellow-600 transition"> Bookings
            </a>

            <div class="flex gap-2">
              <a href="host/edit-home/<%= house._id %>?editing=true" 
                 class="flex-1 text-center bg-green-500 text-white font-semibold py-2 rounded-lg shadow hover:bg-green-600 transition">
                Edit
              </a>
              
              <form action="delete-home/<%= house._id%>" method="POST" class="flex-1">
                <button type="submit" 
                  class="w-full bg-red-500 text-white font-semibold py-2 rounded-lg shadow hover:bg-red-600 transition">
                  Delete
                </button>
              </form>
            </div>

          </div>
        </div>
      </div>
    <% }) %>
  </div>
</div>